<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ù„ÛŒØ³Øª Ù‚ÛŒÙ…Øª Ù…Ø­ØµÙˆÙ„Ø§Øª</title>
  <!-- Tailwind CDN -->
   <script src="scripts/tailwindcss.js"></script>
  <style>
    /* Small customizations */
    @font-face {
  font-family: "Vazirmatn";
  src:
    url("scripts/Vazirmatn-Medium.ttf") format("truetype");
  }

    body { background: #eef2f7; font-family: 'Vazirmatn', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; }
    .glass { background: #ffffff; box-shadow: 0 6px 18px rgba(15,23,42,0.06); }
    /* Modal vertical position for mobile */
    @media (max-width: 640px) {
      #modal {
        align-items: flex-start !important;
      }
      #modal > div {
        margin-top: 5vh !important;
      }
	  #rating-modal > div {
        margin-top: -5vh !important;
      }
    }

/* Target Input */
.generator-input {
  -webkit-appearance: none;
  width: 100%;
  background: transparent;
  cursor: pointer;
}

/* --- Webkit Browsers --- */
.generator-input::-webkit-slider-runnable-track {
  height: 2px;
  background: linear-gradient(to right, #6366f1 var(--range-pct, 0%), #c0c0c0 var(--range-pct, 0%));
  border-radius: 40px;
  border: 0px solid #cbd5e1;
  box-shadow: 0px 2px 0px rgba(0, 0, 0, 0);
}

.generator-input::-webkit-slider-thumb {
  -webkit-appearance: none;
  height: 15px;
  width: 15px;
  background: #4f46e5;
  border-radius: 30px;
  border: 0px solid #996515;
  box-shadow: 0px 4px 0px rgba(212, 175, 55, 0);
  margin-top: -6.5px;
}

/* --- Firefox --- */
.generator-input::-moz-range-track {
  height: 2px;
  background: linear-gradient(to right, #6366f1 var(--range-pct, 0%), #c0c0c0 var(--range-pct, 0%));
  border-radius: 40px;
  border: 0px solid #cbd5e1;
  box-shadow: 0px 2px 0px rgba(0, 0, 0, 0);
}

.generator-input::-moz-range-thumb {
  height: 15px;
  width: 15px;
  background: #4f46e5;
  border-radius: 30px;
  border: 0px solid #996515;
  box-shadow: 0px 4px 0px rgba(212, 175, 55, 0);
}
  </style>
  <link rel="icon" type="image/png" href="scripts/icon.png"/>
</head>
<body class="min-h-screen flex items-start justify-center p-4 xl:p-8 text-gray-900">
  <div class="max-w-6xl w-full">
    <header class="flex items-center justify-between mb-8">
      <div class="relative w-full xl:w-5/6">
        <h1 class="text-xl md:text-2xl xl:text-3xl font-bold">Ú©ÙˆÛŒØ± Ù…ÙˆØªÙˆØ± Ú¯Ù†Ø¨Ø¯Ú©Ø§ÙˆÙˆØ³</h1>
        <p class="text-sm md:text-base mt-2">Ø¢Ø®Ø±ÛŒÙ† Ø¢Ù¾Ø¯ÛŒØª Ù‚ÛŒÙ…Øª Ù‡Ø§ : 1404/12/02</p>
      </div>

      <div class="relative xs:w-2/6 xl:w-1/6 md:contents">
		  <button id="rating" class="cursor-pointer px-4 py-2 md:py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow-md font-medium w-32 md:w-40 float-left mb-2 md:mb-0">Ø´Ø±Ø§ÛŒØ· Ø¨Ø§Ø¬Øª</button>
          <button id="customPrice" class="cursor-pointer px-4 py-2 md:py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow-md font-medium w-32 md:w-40 float-left md:mr-2">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
      </div>

      <!-- Ø­Ø°Ù ÙØ±Ù… Ùˆ Ø¯Ú©Ù…Ù‡ Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„ -->
    </header>

    <main class="rounded-xl p-2 xl:p-6">
      <div class="flex items-center justify-between gap-4">
        <div class="relative w-full">
          <input id="searchInput" type="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„..." class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-200 bg-white" onclick="this.select()" />
          <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none text-gray-400">ğŸ”</div>
        </div>
      </div>
      <section id="grid" class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6"></section>
    </main>
  </div>

  <!-- Modal -->
  <div id="modal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-60 p-6">
    <div class="bg-white text-slate-900 rounded-xl max-w-xl w-full p-6 shadow-2xl">
      <div class="flex items-start justify-between mb-4">
        <button id="closeModal" aria-label="Ø¨Ø³ØªÙ†" class="text-gray-500 hover:text-gray-700">âœ•</button>
      </div>
      <div id="modalContent"></div>
    </div>
  </div>
  
  <div class="container-rating">
  <div id="rating-modal" class="fixed inset-0 items-center justify-center bg-black bg-opacity-60 p-6 flex">
    <div class="bg-white text-slate-900 rounded-xl max-w-xl w-full p-6 shadow-2xl">
      <div class="flex items-start justify-between mb-4">
        <button id="closeModal2" aria-label="Ø¨Ø³ØªÙ†" class="text-gray-500 hover:text-gray-700">âœ•</button>
      </div>
	  
		<div class="mb-4 text-lg font-medium" style="border-bottom:1px solid #e5e7eb;padding-bottom:10px;margin-top:-10px;">Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø±Ø§ÛŒØ· Ø¨Ø§Ø¬Øª</div>
        <div class="form-group">
            <label for="creditRating" class="text-base text-gray-600">Ø±ØªØ¨Ù‡ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ:</label>
            <select id="creditRating" class="text-base text-gray-900" style="width:85px">
                <option value="AB">A ÛŒØ§ B</option>
                <option value="CD">C ÛŒØ§ D</option>
            </select>
        </div>

        <div class="form-group">
            <label for="loanAmount" class="text-base text-gray-600">Ù…Ø¨Ù„Øº Ø§Ø¹ØªØ¨Ø§Ø± :</label>
            <input type="text" id="loanAmount" inputmode="numeric" onclick="this.select()">
        </div>

        <div class="result" id="result">
            <div class="result-title text-base text-gray-600" >Ù†ØªÛŒØ¬Ù‡ Ø¨Ø±Ø±Ø³ÛŒ:</div>
            <div class="result-text" id="resultText">Ù„Ø·ÙØ§Ù‹ Ø±ØªØ¨Ù‡ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ Ùˆ Ù…Ø¨Ù„Øº Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</div>
        </div>
    </div>
	</div>
    </div>
	
<style>
.container-rating select, .container-rating input{ 
	border: 1px solid #80808073;
    border-radius: 5px;
    padding: 5px;
    margin: 10px;
}
.container-rating input {width:60%;}
.result-text {
	width: 100%;
    background: #dcdcdc6b;
    padding: 2%;
    border-radius: 10px;
    margin-top: 7px;
	line-height:30px;
}
*:focus {
    outline: none;
}
</style>
  <script src="scripts/app.js"></script>
  <script>
  // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø§Ù„Ù…Ø§Ù† Ø¯Ø± Ø§Ø¨ØªØ¯Ø§
document.querySelector('.container-rating').style.display = 'none';

// Ù†Ù…Ø§ÛŒØ´ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ rating#
document.querySelector('#rating').addEventListener('click', function() {
    document.querySelector('.container-rating').style.display = 'block';
});

// Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ closeModal2#
document.querySelector('#closeModal2').addEventListener('click', function() {
    document.querySelector('.container-rating').style.display = 'none';
	document.querySelector('#loanAmount').value = '';
	document.querySelector('#resultText').innerText = 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
});
  
  document.getElementById('creditRating').addEventListener('change', calculateLoan);
        document.getElementById('loanAmount').addEventListener('input', calculateLoan);

        function roundUpToNearestTenMillion(amount) {
            // Ú¯Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§ Ø¨Ù‡ Ù†Ø²Ø¯ÛŒÚ©ØªØ±ÛŒÙ† 10 Ù…ÛŒÙ„ÛŒÙˆÙ† (Ù‡Ø± 10 Ù…ÛŒÙ„ÛŒÙˆÙ† = 10,000,000)
            return Math.ceil(amount / 10000000) * 10000000;
        }

        function calculateLoan() {
            const creditRating = document.getElementById('creditRating').value;
            const loanAmount = parseFloat(document.getElementById('loanAmount').value);
            const resultText = document.getElementById('resultText');
            
            if (!creditRating) {
                resultText.innerText = 'Ù„Ø·ÙØ§Ù‹ Ø±ØªØ¨Ù‡ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯';
                return;
            }

            if (isNaN(loanAmount) || loanAmount <= 0) {
                resultText.innerText = 'Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯';
                return;
            }

            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ù¾Ø±Ø¯Ù‡ Ø¨Ù‡ Ø±ÛŒØ§Ù„
            let depositRial = (loanAmount / 1000000000) * 75000000;
            
            // Ú¯Ø±Ø¯ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¨Ø§Ù„Ø§ Ø¨Ù‡ Ù†Ø²Ø¯ÛŒÚ©ØªØ±ÛŒÙ† 10 Ù…ÛŒÙ„ÛŒÙˆÙ†
            let roundedDeposit = depositRial + 10000000;
            
            // ÙØ±Ù…Øª Ú©Ø±Ø¯Ù† Ø¹Ø¯Ø¯ Ø¨Ø§ Ø¬Ø¯Ø§Ú©Ù†Ù†Ø¯Ù‡ Ù‡Ø²Ø§Ø±Ú¯Ø§Ù†
            let formattedDeposit = roundedDeposit.toLocaleString('fa-IR');
			
			let installmentPeriod = '';
if (loanAmount <= 5000000000) {
    installmentPeriod = 'Ø§Ù‚Ø³Ø§Ø· Û²Û´ Ù…Ø§Ù‡Ù‡';
} else if (loanAmount > 5000000000 && loanAmount <= 7500000000) {
    installmentPeriod = 'Ø§Ù‚Ø³Ø§Ø· Û³Û° Ù…Ø§Ù‡Ù‡';
} else if (loanAmount > 7500000000) {
    installmentPeriod = 'Ø§Ù‚Ø³Ø§Ø· Û³Û¶ Ù…Ø§Ù‡Ù‡';
}
            
let conditions = '';

            if (creditRating === 'AB') { // Ø±ØªØ¨Ù‡ A ÛŒØ§ B
                if (loanAmount <= 2000000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ  ÛŒØ§ Ø³ÙØªÙ‡ Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©ÛŒ - Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¶Ø§Ù…Ù†\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
                else if (loanAmount >= 2100000000 && loanAmount <= 5000000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ (Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¶Ø§Ù…Ù†) ÛŒØ§ Ø³ÙØªÙ‡ Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©ÛŒ Ø¨Ø§ ÛŒÚ© Ø¶Ø§Ù…Ù†\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
                else if (loanAmount > 5000000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ + ÛŒÚ© Ø¶Ø§Ù…Ù† (Ø¨Ø§ Ø±ØªØ¨Ù‡ Ø§Ø¹ØªØ¨Ø§Ø±ÛŒ AØŒ B ÛŒØ§ C)\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
            }
            else if (creditRating === 'CD') { // Ø±ØªØ¨Ù‡ C ÛŒØ§ D
                if (loanAmount <= 2000000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ (Ø¨Ø¯ÙˆÙ† Ø¶Ø§Ù…Ù†) ÛŒØ§ Ø³ÙØªÙ‡ Ø§Ù„Ú©ØªØ±ÙˆÙ†ÛŒÚ©ÛŒ Ø¨Ø§ Ø¶Ø§Ù…Ù† A,B\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
                else if (loanAmount >= 2100000000 && loanAmount <= 5000000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ + ÛŒÚ© Ø¶Ø§Ù…Ù† A,B\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
                else if (loanAmount >= 5100000000 && loanAmount <= 7500000000) {
                    conditions = `${installmentPeriod}\n- ÛŒÚ© ÙÙ‚Ø±Ù‡ Ú†Ú© ØµÛŒØ§Ø¯ÛŒ + Ø¯Ùˆ Ø¶Ø§Ù…Ù† A,B\n- Ø³Ù¾Ø±Ø¯Ù‡ + Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯: ${formattedDeposit} Ø±ÛŒØ§Ù„`;
                }
                else if (loanAmount > 7500000000) {
                    conditions = 'Ù…Ø¨Ù„Øº Ø§Ø¹ØªØ¨Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ø¨ÛŒØ´ØªØ± Ø§Ø² Ø±ØªØ¨Ù‡ Ø´Ù…Ø§ Ø§Ø³Øª';
                }
            }

            resultText.innerText = conditions;
        }


document.addEventListener('keydown', (event) => {
    if(event.target.matches('#loanAmount') && event.key === 'Enter') {
        event.preventDefault();
        let value = event.target.value.trim();
        if(value && !isNaN(value)) {
            event.target.value = value + '0000000';
            event.target.dispatchEvent(new Event('input', { bubbles: true }));
            event.target.dispatchEvent(new Event('change', { bubbles: true }));
        }
    }
});

const loanAmount = parseFloat(
  document.getElementById('loanAmount').value.replace(/,/g, '')
);

const loanInput = document.getElementById("loanAmount");

loanInput.addEventListener("input", function () {
  let value = this.value.replace(/,/g, "").replace(/\D/g, "");

  if (!value) {
    this.value = "";
    return;
  }

  this.value = value.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
});
  </script>
</body>

</html>

